var API_URL;window.App={params:function(){var t,e,o,n,r,a;for(a={},r=window.location.href.split("?")[1].split("&"),e=0,o=r.length;o>e;e++)n=r[e],t=n.split("="),a[t[0]]=t[1];return a},getStatus:function(){},init:function(){return window.current=new Share},host:function(){var t,e;return e=window.location.host,t="",t="www.google.com"===e?"Google":"LuZhouLaoJiao"}},API_URL="https://leancloud.cn/1.1/classes",this.APIModel=function(){function t(){}return t.prototype.__apiReq=function(t){var e;return null==t&&(t={method:"GET",data:{},params:{},url:""}),e={},$.ajax({type:t.method,url:API_URL+"/"+t.url,dataType:"JSON",params:t.params,data:t.data,async:!1,success:function(t,o){return e=t},headers:{"X-AVOSCloud-Application-Id":"tua132u1316bi5opzxm7zjknwaq6qnb2i5rkp3d2h96m18z2","X-AVOSCloud-Application-Key":"qs35km6zeer3sglasmy6nkcc9zhc4s1cbyu2j7kkskhsr1g4"}}),e},t}();var extend=function(t,e){function o(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;this.Share=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.constractor=function(t){null==t&&(t=null),null!==t&&this.__getDataByOwnerId(t)},e.prototype.share=function(){},e.prototype.create=function(t){return this.__analyseData(this.__apiReq({method:"POST",url:"Share",data:{ownerId:t}}))},e.prototype.helpd=function(){var t,e;t={helper:{__op:"AddUnique",objects:[helperId]}},console.log(t),e=this.__apiReq({method:"PUT",url:"Share/"+this.objectId,data:t}),console.log(e),this.__updateData()},e.prototype.__getDataByOwnerId=function(t){var e;e=this.__apiReq({url:"Share",params:{where:"{'ownerId':'"+t+"'}"}}),this.__analyseData(e.results[0])},e.prototype.__updateData=function(){this.__analyseData(this.__apiReq({url:"Share/"+this.objectId}))},e.prototype.__analyseData=function(t){this.objectId=t.objectId,this.helpers=t.helper,this.ownerId=t.ownerId,this.status=this.__isDone(),console.log("objectId: "+this.objectId+", ownerId: "+this.ownerId+", helpers: "+this.helpers)},e.prototype.__isDone=function(){return _.uniq(this.helpers).length>2?!0:!1},e}(APIModel);